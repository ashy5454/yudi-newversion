# Firebase Deployment Guide for Yudi Chat

## Prerequisites
- Firebase CLI installed: `npm install -g firebase-tools`
- Logged into Firebase: `firebase login` (already done âœ…)
- Project ID: `yudi-8bd6f`

## Deployment Steps

### 1. Build the Application
```bash
npm run build
```

### 2. Deploy to Firebase App Hosting
```bash
firebase deploy --only apphosting
```

### 3. Set Environment Variables in Firebase
After deployment, you need to set your environment variables in Firebase Console:

1. Go to: https://console.firebase.google.com/project/yudi-8bd6f/apphosting
2. Click on your backend "yudi"
3. Go to "Environment variables"
4. Add these variables:
   - `GEMINI_API_KEY` = Your Gemini API key
   - `NEXT_PUBLIC_FIREBASE_API_KEY` = (from your .env.local)
   - `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN` = (from your .env.local)
   - `NEXT_PUBLIC_FIREBASE_PROJECT_ID` = yudi-8bd6f
   - `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET` = (from your .env.local)
   - `NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID` = (from your .env.local)
   - `NEXT_PUBLIC_FIREBASE_APP_ID` = (from your .env.local)

### 4. Deploy Firestore Rules & Indexes
```bash
firebase deploy --only firestore
```

### 5. Deploy Storage Rules
```bash
firebase deploy --only storage
```

## Full Deployment (All at Once)
```bash
firebase deploy
```

## Verify Deployment
After deployment, your app will be available at:
- **Production URL**: Will be shown in the terminal after deployment
- **Firebase Console**: https://console.firebase.google.com/project/yudi-8bd6f/apphosting

## Troubleshooting

### If build fails:
1. Check for TypeScript errors: `npm run lint`
2. Fix any errors shown
3. Try building again: `npm run build`

### If deployment fails:
1. Check Firebase CLI version: `firebase --version`
2. Update if needed: `npm install -g firebase-tools@latest`
3. Re-login: `firebase login --reauth`

### If app doesn't work after deployment:
1. Check environment variables are set correctly in Firebase Console
2. Check browser console for errors
3. Check Firebase logs: `firebase apphosting:logs`

## Monitoring
- **Logs**: `firebase apphosting:logs --tail`
- **Console**: https://console.firebase.google.com/project/yudi-8bd6f

## Rollback (if needed)
```bash
firebase apphosting:rollback
```

## Notes
- First deployment may take 5-10 minutes
- Subsequent deployments are faster (2-3 minutes)
- Environment variables changes require redeployment
- Domain will be auto-generated by Firebase App Hosting
